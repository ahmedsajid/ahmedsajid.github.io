<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Simple cron monitoring using healthchecks.io | Ahmed Sajid's Personal Web</title>
<meta name=keywords content="healthchecks.io,monitoring,cron,automation,ansible">
<meta name=description content="While working on home server automation, I came across the awesome Open Source project healthchecks.
I had been looking for a simple way to monitoring my Ansible home automation setup that is triggered via cron and send me alerts if my home automation takes longer than a set interval or just fails.
healthchecks.io, the service for healthchecks project, is an extremely simple dashboard for setting up monitoring. It also has integration with alerting systems as well as commonly used communication tools such as Teams, Slack, Signal and numerous others.">
<meta name=author content="Ahmed Sajid">
<link rel=canonical href=https://ahmedsajid.io/posts/healthchecks.io/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://ahmedsajid.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://ahmedsajid.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://ahmedsajid.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://ahmedsajid.io/apple-touch-icon.png>
<link rel=mask-icon href=https://ahmedsajid.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.0">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QVDXPX8C7C"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-QVDXPX8C7C',{anonymize_ip:!1})}</script>
<meta property="og:title" content="Simple cron monitoring using healthchecks.io">
<meta property="og:description" content="While working on home server automation, I came across the awesome Open Source project healthchecks.
I had been looking for a simple way to monitoring my Ansible home automation setup that is triggered via cron and send me alerts if my home automation takes longer than a set interval or just fails.
healthchecks.io, the service for healthchecks project, is an extremely simple dashboard for setting up monitoring. It also has integration with alerting systems as well as commonly used communication tools such as Teams, Slack, Signal and numerous others.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ahmedsajid.io/posts/healthchecks.io/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-09-20T09:00:00-05:00">
<meta property="article:modified_time" content="2021-09-20T09:00:00-05:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Simple cron monitoring using healthchecks.io">
<meta name=twitter:description content="While working on home server automation, I came across the awesome Open Source project healthchecks.
I had been looking for a simple way to monitoring my Ansible home automation setup that is triggered via cron and send me alerts if my home automation takes longer than a set interval or just fails.
healthchecks.io, the service for healthchecks project, is an extremely simple dashboard for setting up monitoring. It also has integration with alerting systems as well as commonly used communication tools such as Teams, Slack, Signal and numerous others.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://ahmedsajid.io/posts/"},{"@type":"ListItem","position":3,"name":"Simple cron monitoring using healthchecks.io","item":"https://ahmedsajid.io/posts/healthchecks.io/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Simple cron monitoring using healthchecks.io","name":"Simple cron monitoring using healthchecks.io","description":"While working on home server automation, I came across the awesome Open Source project healthchecks.\nI had been looking for a simple way to monitoring my Ansible home automation setup that is triggered via cron and send me alerts if my home automation takes longer than a set interval or just fails.\nhealthchecks.io, the service for healthchecks project, is an extremely simple dashboard for setting up monitoring. It also has integration with alerting systems as well as commonly used communication tools such as Teams, Slack, Signal and numerous others.","keywords":["healthchecks.io","monitoring","cron","automation","ansible"],"articleBody":"While working on home server automation, I came across the awesome Open Source project healthchecks.\nI had been looking for a simple way to monitoring my Ansible home automation setup that is triggered via cron and send me alerts if my home automation takes longer than a set interval or just fails.\nhealthchecks.io, the service for healthchecks project, is an extremely simple dashboard for setting up monitoring. It also has integration with alerting systems as well as commonly used communication tools such as Teams, Slack, Signal and numerous others.\nFrom project’s website:\n Healthchecks.io works as a dead man’s switch for processes that need to run continuously or on a regular, known schedule.\n That means if the results are received within given amount of time at regular intervals, the check is considered healthy, if not the check has failed.\nResults can be submitted using curl command embedded within your script.\n# Add at the end of your script # check-uuid - custom uuid generated for your check curl https://hc-ping.com/check-uuid It also supports signals such as start to indicate start of script or a job and fail to indicate failure.\n# Beginning of your script curl https://hc-ping.com/check-uuid/start ################## # YOUR TASKS HERE ################## # Towards the end of the script if [ $? -eq 0 ] then # Post success curl https://hc-ping.com/check-uuid else # Post failure curl https://hc-ping.com/check-uuid/fail fi A full range of supported API calls can be found here.\nhealthchecks.io also supports submitting logs which can then be part of the alert message.\nhealthchecks.io is trivial to setup and easy to management. Initial setup is extremely simple, it has great range of features and documentation is well written. Here’s a link to Ansible callback plugin that I’m using to integrate with healthchecks.io.\n","wordCount":"291","inLanguage":"en","datePublished":"2021-09-20T09:00:00-05:00","dateModified":"2021-09-20T09:00:00-05:00","author":[{"@type":"Person","name":"Ahmed Sajid"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://ahmedsajid.io/posts/healthchecks.io/"},"publisher":{"@type":"Organization","name":"Ahmed Sajid's Personal Web","logo":{"@type":"ImageObject","url":"https://ahmedsajid.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://ahmedsajid.io accesskey=h title="Ahmed Sajid's Personal Web (Alt + H)">Ahmed Sajid's Personal Web</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://ahmedsajid.io title=Home>
<span>Home</span>
</a>
</li>
<li>
<a href=https://ahmedsajid.io/resume title=Resume>
<span>Resume</span>
</a>
</li>
<li>
<a href=https://ahmedsajid.io/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://ahmedsajid.io/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://ahmedsajid.io>Home</a>&nbsp;»&nbsp;<a href=https://ahmedsajid.io/posts/>Posts</a></div>
<h1 class=post-title>
Simple cron monitoring using healthchecks.io
</h1>
<div class=post-meta><span title="2021-09-20 09:00:00 -0500 -0500">September 20, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Ahmed Sajid&nbsp;|&nbsp;<a href=https://github.com/ahmedsajid/ahmedsajid.io/tree/web/content/posts/Healthchecks.io.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header>
<div class=post-content><p>While working on home server automation, I came across the awesome Open Source project <a href=https://github.com/healthchecks/healthchecks>healthchecks</a>.</p>
<p>I had been looking for a simple way to monitoring my <a href=https://github.com/ahmedsajid/home-setup>Ansible home automation setup</a> that is triggered via cron and send me alerts if my home automation takes longer than a set interval or just fails.</p>
<p><a href=https://healthchecks.io>healthchecks.io</a>, the service for healthchecks project, is an extremely simple dashboard for setting up monitoring. It also has integration with alerting systems as well as commonly used communication tools such as Teams, Slack, Signal and numerous others.</p>
<p>From project&rsquo;s <a href=https://healthchecks.io/docs/>website</a>:</p>
<blockquote>
<p>Healthchecks.io works as a dead man&rsquo;s switch for processes that need to run continuously or on a regular, known schedule.</p>
</blockquote>
<p>That means if the results are received within given amount of time at regular intervals, the check is considered healthy, if not the check has failed.</p>
<p>Results can be submitted using <code>curl</code> command embedded within your script.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#75715e># Add at the end of your script</span>
<span style=color:#75715e># check-uuid - custom uuid generated for your check</span>
curl https://hc-ping.com/check-uuid
</code></pre></div><p>It also supports signals such as <code>start</code> to indicate start of script or a job and <code>fail</code> to indicate failure.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#75715e># Beginning of your script</span>
curl https://hc-ping.com/check-uuid/start

<span style=color:#75715e>##################</span>
<span style=color:#75715e># YOUR TASKS HERE</span>
<span style=color:#75715e>##################</span>

<span style=color:#75715e># Towards the end of the script</span>

<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $? -eq <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span>
<span style=color:#66d9ef>then</span> 
    <span style=color:#75715e># Post success</span>
    curl https://hc-ping.com/check-uuid
<span style=color:#66d9ef>else</span> 
    <span style=color:#75715e># Post failure</span>
    curl https://hc-ping.com/check-uuid/fail
<span style=color:#66d9ef>fi</span>
</code></pre></div><p>A full range of supported API calls can be found <a href=https://healthchecks.io/docs/http_api/>here</a>.</p>
<p>healthchecks.io also supports <a href=https://healthchecks.io/docs/attaching_logs/>submitting logs</a> which can then be part of the alert message.</p>
<p>healthchecks.io is trivial to setup and easy to management. Initial setup is extremely simple, it has great range of features and documentation is well written. Here&rsquo;s a <a href=https://github.com/ahmedsajid/home-setup/blob/3bff751ac52af4ef7842fa8b9cf065d9e7260f36/ansible/callback_plugins/healthchecks.py>link</a> to Ansible callback plugin that I&rsquo;m using to integrate with healthchecks.io.</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://ahmedsajid.io/tags/healthchecks.io/>healthchecks.io</a></li>
<li><a href=https://ahmedsajid.io/tags/monitoring/>monitoring</a></li>
<li><a href=https://ahmedsajid.io/tags/cron/>cron</a></li>
<li><a href=https://ahmedsajid.io/tags/automation/>automation</a></li>
<li><a href=https://ahmedsajid.io/tags/ansible/>ansible</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://ahmedsajid.io/posts/deploy-virtual-server-using-curl/>
<span class=title>« Prev Page</span>
<br>
<span>Deploy Virtual Servers using cURL</span>
</a>
<a class=next href=https://ahmedsajid.io/posts/immediate-kubernetes-results/>
<span class=title>Next Page »</span>
<br>
<span>Immediate Kubernetes Certification Exam results</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://ahmedsajid.io>Ahmed Sajid's Personal Web</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>